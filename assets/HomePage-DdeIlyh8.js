import{r,j as e,t as x,R as $}from"./index-Cd6whSpr.js";/* empty css                 */const M=({post:n,isClosing:t,onClose:u,onAnimationEnd:a})=>{const d=document.getElementById("modal-root"),m=r.useRef(null),o=r.useRef(null);return r.useEffect(()=>{if(n&&!t&&d){o.current=document.activeElement;const l=setTimeout(()=>{var c;return(c=m.current)==null?void 0:c.focus()},0);return()=>{clearTimeout(l),o.current&&typeof o.current.focus=="function"&&o.current.focus()}}},[n,t,d]),!d||!n?null:$.createPortal(e.jsx("div",{className:`news-modal-backdrop ${t?"closing":""}`,onClick:u,onAnimationEnd:a,role:"dialog","aria-modal":"true","aria-labelledby":"news-modal-title",children:e.jsxs("div",{className:`news-modal ${t?"closing":""}`,onClick:l=>l.stopPropagation(),children:[e.jsx("button",{ref:m,type:"button",className:"news-modal-close",onClick:u,"aria-label":"Close",children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})}),e.jsxs("div",{className:"news-modal-content",children:[e.jsxs("div",{className:"news-modal-header",children:[e.jsx("h3",{id:"news-modal-title",className:"news-modal-title",children:n.title}),e.jsx("time",{className:"news-modal-date",dateTime:n.date,children:new Date(n.date).toLocaleDateString("en",{year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"news-modal-body",children:[n.image&&e.jsx("div",{className:"news-modal-image",children:e.jsx("img",{src:`/news/${n.image}`,alt:n.title,className:"news-modal-img",loading:"eager"})}),e.jsx("div",{className:"news-modal-text",children:n.content.includes("<")?e.jsx("div",{dangerouslySetInnerHTML:{__html:n.content.split(`

`).map(l=>l.trim()?`<p>${l.trim().replace(/\n/g,"<br>")}</p>`:"<p>&nbsp;</p>").join("")}}):n.content.split(`
`).map((l,c)=>e.jsx("p",{className:"news-modal-p",children:l||"Â "},c))})]})]})]})}),d)},E=({currentLang:n})=>{const[t,u]=r.useState([]),[a,d]=r.useState(0),[m]=r.useState(3),[o,l]=r.useState(null),[c,j]=r.useState(!1),w=x[n]||x.en,v=r.useMemo(()=>t.find(s=>s.id===o)||null,[o,t]);r.useEffect(()=>{let s=!1;return(async()=>{try{const h=await fetch("/news.json");if(!h.ok)throw new Error("Failed to load news");const y=await h.json();if(!s){const k=y.posts.sort((C,S)=>new Date(S.date)-new Date(C.date));u(k)}}catch(h){console.error("Failed to load news:",h),s||u([])}})(),()=>{s=!0}},[]);const N=()=>{a+m<t.length&&d(s=>s+1)},f=()=>{a>0&&d(s=>s-1)},g=s=>{l(s)},p=()=>{j(!0)},b=s=>{c&&s.target.classList.contains("news-modal-backdrop")&&(l(null),j(!1))};return r.useEffect(()=>{if(o&&!c)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[o,c]),t.length?e.jsxs("div",{className:"news-section",children:[e.jsx("h2",{className:"news-title",children:w.latestNews}),e.jsxs("div",{className:"news-carousel",children:[e.jsx("button",{className:`news-nav-btn prev ${a===0?"disabled":""}`,onClick:f,disabled:a===0,"aria-label":"Previous news",children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M15 18l-6-6 6-6"})})}),e.jsx("div",{className:"news-cards-container",children:e.jsx("div",{className:"news-cards-track",style:{transform:`translateX(-${a*(100/m)}%)`},children:t.map(s=>{const i=s.image?`/news/${s.image}`:null;return e.jsx("div",{className:"news-card-wrapper",children:e.jsxs("article",{className:`news-card ${i?"has-bg":""}`,style:i?{"--bg-url":`url(${i})`}:void 0,role:"button",tabIndex:0,onClick:()=>g(s.id),onKeyDown:h=>{(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),g(s.id))},children:[i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"news-layer bg","aria-hidden":"true"}),e.jsx("div",{className:"news-layer overlay","aria-hidden":"true"})]}),e.jsx("div",{className:"news-layer glass","aria-hidden":"true"}),e.jsxs("div",{className:"news-content",children:[e.jsx("div",{className:"news-meta",children:e.jsx("time",{dateTime:s.date,children:new Date(s.date).toLocaleDateString("en",{year:"numeric",month:"short",day:"2-digit"})})}),e.jsx("h3",{className:"news-card-title",children:s.title}),e.jsx("p",{className:"news-card-text",children:s.content.includes("<")?e.jsx("span",{dangerouslySetInnerHTML:{__html:s.content.replace(/<[^>]+>/g,"").split(`
`)[0].substring(0,150)+(s.content.length>150?"...":"")}}):s.content.split(`
`)[0]}),e.jsxs("div",{className:"news-read-more",children:[w.readMore,e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M5 12h14m-7-7l7 7-7 7"})})]})]})]})},s.id)})})}),e.jsx("button",{className:`news-nav-btn next ${a+m>=t.length?"disabled":""}`,onClick:N,disabled:a+m>=t.length,"aria-label":"Next news",children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M9 18l6-6-6-6"})})})]}),e.jsx("div",{className:"news-indicators",children:Array.from({length:Math.max(1,t.length-m+1)}).map((s,i)=>e.jsx("button",{className:`news-indicator ${i===a?"active":""}`,onClick:()=>d(i),"aria-label":`Go to news ${i+1}`},i))}),e.jsx(M,{post:v,isClosing:c,onClose:p,onAnimationEnd:b})]}):e.jsxs("div",{className:"news-section",children:[e.jsx("h2",{className:"news-title",children:w.latestNews}),e.jsx("div",{className:"news-empty",children:w.noNews})]})};function I({currentLang:n}){const t=x[n]||x.en,a=`/banners/${n==="ru"?"ru":"en"}/home.webp`;return e.jsx("div",{className:"home-page base-page",children:e.jsxs("div",{className:"content-wrapper",children:[e.jsx("div",{className:"banner-section",children:e.jsx("img",{src:a,alt:"Home Banner",className:"page-banner",loading:"lazy"})}),e.jsx("div",{className:"page-content",style:{marginBottom:"50px",minHeight:"auto"},children:e.jsx("div",{className:"coming-soon",children:e.jsx("p",{children:t.homeComingSoon||"Home section coming soon..."})})}),e.jsx("div",{className:"news-section-wrapper",children:e.jsx(E,{currentLang:n})})]})})}export{I as default};
