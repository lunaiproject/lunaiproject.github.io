import{r as n,j as e,t as E,R as X,k as H,l as K,n as q,h as Q,P as Z,A as ee,g as B,L as se,s as ae}from"./index-Cd6whSpr.js";import{p as le}from"./singersParser-BShtwhUG.js";/* empty css                 */const ie=({image:l,images:f,currentIndex:r,isClosing:d,onClose:x,onPrev:m,onNext:h,onAnimationEnd:s,t:u})=>{const p=document.getElementById("modal-root"),v=f&&f.length>1,y=n.useRef(null),b=n.useRef(null);return n.useEffect(()=>{if(l&&!d&&p){b.current=document.activeElement;const t=setTimeout(()=>{var c;return(c=y.current)==null?void 0:c.focus()},0);return()=>{clearTimeout(t),b.current&&typeof b.current.focus=="function"&&b.current.focus()}}},[l,d,p]),!p||!l?null:X.createPortal(e.jsx("div",{className:`news-modal-backdrop ${d?"closing":""}`,onClick:x,onAnimationEnd:s,role:"dialog","aria-modal":"true","aria-labelledby":"illustration-modal-name",children:e.jsxs("div",{className:`news-modal illustration-modal-frame ${d?"closing":""}`,onClick:t=>t.stopPropagation(),children:[e.jsx("header",{className:"illustration-modal-header",children:e.jsx("button",{ref:y,type:"button",className:"illustration-modal-close",onClick:x,"aria-label":"Close",children:e.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})}),e.jsxs("div",{className:"illustration-modal-main",children:[v?e.jsx("div",{className:"illustration-modal-side illustration-modal-prev",children:e.jsx("button",{type:"button",className:"illustration-nav-btn",onClick:t=>{t.stopPropagation(),m()},"aria-label":u.illustrationPrev,children:e.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M15 18l-6-6 6-6"})})})}):null,e.jsx("div",{className:"illustration-modal-image-wrap",children:e.jsx("img",{src:l.url,alt:l.name,className:"illustration-modal-img",loading:"eager"})}),v?e.jsx("div",{className:"illustration-modal-side illustration-modal-next",children:e.jsx("button",{type:"button",className:"illustration-nav-btn",onClick:t=>{t.stopPropagation(),h()},"aria-label":u.illustrationNext,children:e.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M9 18l6-6-6-6"})})})}):null]}),e.jsxs("footer",{className:"illustration-modal-footer",children:[e.jsx("p",{id:"illustration-modal-name",className:"illustration-modal-name",children:l.name}),v&&e.jsxs("p",{className:"illustration-modal-counter",children:[r+1," / ",f.length]})]})]})}),p)};function te({singer:l,currentLang:f="en"}){const[r,d]=n.useState(null),[x,m]=n.useState(!1),h=E[f]||E.en,s=n.useMemo(()=>{if(!l)return[];const t=`/singers/${l.page}`,c=[".webp",".png",".jpg",".jpeg",".gif",".svg"],g=[],S=l.artist?`${l.name} main portrait by ${l.artist}`:`${l.name} main portrait`;if(g.push({name:S,url:`${t}/portrait.webp`,filename:"portrait.webp"}),l.imgs&&l.imgs.length>0){const R=l.imgs.map(N=>{const j=N.trim(),w=j.lastIndexOf("."),k=w>0&&c.some(I=>j.toLowerCase().endsWith(I)),i=k?j:`${j}.webp`;return{name:k&&w>0?j.substring(0,w):j,url:`${t}/${encodeURIComponent(i)}`,filename:i}});g.push(...R)}return g},[l]),u=t=>{d(t)},p=n.useCallback(()=>{s.length!==0&&d(t=>t===null?0:(t-1+s.length)%s.length)},[s.length]),v=n.useCallback(()=>{s.length!==0&&d(t=>t===null?0:(t+1)%s.length)},[s.length]),y=()=>{m(!0)},b=t=>{x&&t.target.classList.contains("news-modal-backdrop")&&(d(null),m(!1))};return n.useEffect(()=>{if(r!==null&&!x)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[r,x]),n.useEffect(()=>{if(r===null||s.length===0)return;const t=c=>{c.key==="ArrowLeft"?(c.preventDefault(),p()):c.key==="ArrowRight"?(c.preventDefault(),v()):c.key==="Escape"&&(c.preventDefault(),y())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[r,s.length,p,v]),s.length===0?null:e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"illustrations-section",children:[e.jsx("h2",{className:"section-title",children:h.illustrations}),e.jsx("div",{className:"illustrations-grid",children:s.map((t,c)=>e.jsx("div",{className:"illustration-item",onClick:()=>u(c),children:e.jsxs("div",{className:"illustration-image-wrapper",children:[e.jsx("img",{src:t.url,alt:t.name,className:"illustration-image",loading:"lazy"}),e.jsx("div",{className:"illustration-overlay",children:e.jsx("span",{className:"illustration-name",children:t.name})})]})},c))})]}),e.jsx(ie,{image:r!==null?s[r]:null,images:s,currentIndex:r??0,isClosing:x,onClose:y,onPrev:p,onNext:v,onAnimationEnd:b,t:h})]})}const ne="data:image/svg+xml,%3csvg%20fill='currentColor'%20fill-rule='evenodd'%20height='1em'%20style='flex:none;line-height:1'%20viewBox='0%200%2024%2024'%20width='1em'%20xmlns='http://www.w3.org/2000/svg'%3e%3ctitle%3ebilibili%3c/title%3e%3cpath%20clip-rule='evenodd'%20d='M4.977%203.561a1.31%201.31%200%20111.818-1.884l2.828%202.728c.08.078.149.163.205.254h4.277a1.32%201.32%200%2001.205-.254l2.828-2.728a1.31%201.31%200%20011.818%201.884L17.82%204.66h.848A5.333%205.333%200%200124%209.992v7.34a5.333%205.333%200%2001-5.333%205.334H5.333A5.333%205.333%200%20010%2017.333V9.992a5.333%205.333%200%20015.333-5.333h.781L4.977%203.56zm.356%203.67a2.667%202.667%200%2000-2.666%202.667v7.529a2.667%202.667%200%20002.666%202.666h13.334a2.667%202.667%200%20002.666-2.666v-7.53a2.667%202.667%200%2000-2.666-2.666H5.333zm1.334%205.192a1.333%201.333%200%20112.666%200v1.192a1.333%201.333%200%2011-2.666%200v-1.192zM16%2011.09c-.736%200-1.333.597-1.333%201.333v1.192a1.333%201.333%200%20102.666%200v-1.192c0-.736-.597-1.333-1.333-1.333z'%3e%3c/path%3e%3c/svg%3e",P={Play:()=>e.jsx("i",{className:"fi fi-sr-play",style:{fontSize:"12px"}}),Pause:()=>e.jsx("i",{className:"fi fi-sr-pause",style:{fontSize:"12px"}}),Download:()=>e.jsx("i",{className:"fi fi-sr-down-to-line",style:{fontSize:"20px"}}),Web:()=>e.jsx("i",{className:"fi fi-sr-globe",style:{fontSize:"20px"}})},re=l=>l==="glitch",oe={duration:.5,ease:"easeOut"},ce={opacity:0},de={opacity:1},me={opacity:0},he=({singer:l,onClose:f,t:r})=>{const[d,x]=n.useState(!1),m=n.useRef(null),h=n.useRef(null);n.useEffect(()=>{h.current=document.activeElement;const u=setTimeout(()=>{var p;return(p=m.current)==null?void 0:p.focus()},0);return()=>{clearTimeout(u),h.current&&typeof h.current.focus=="function"&&h.current.focus()}},[]);const s=()=>{d&&l.dl&&(ae("download_model",{category:"Singers",label:l.name}),window.open(l.dl,"_blank"),f())};return e.jsx("div",{className:"dl-modal-backdrop",onClick:f,role:"dialog","aria-modal":"true","aria-labelledby":"dl-modal-title",children:e.jsxs("div",{className:"dl-modal",onClick:u=>u.stopPropagation(),children:[e.jsx("h3",{id:"dl-modal-title",className:"dl-modal-title",children:r.termsTitle}),e.jsxs("p",{className:"dl-modal-text",children:[r.beforeDownload," ",e.jsx("strong",{children:l.name}),r.mustAgree]}),e.jsxs("div",{className:"dl-modal-warning",children:[e.jsx("p",{children:r.warnComm}),e.jsx("p",{children:r.warnAi}),e.jsx("p",{children:r.warnR18})]}),e.jsx(se,{to:"/termsofuse",className:"dl-link-terms",target:"_blank",children:r.readFull}),e.jsxs("label",{className:"dl-checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:d,onChange:u=>x(u.target.checked)}),e.jsx("span",{children:r.iAgree})]}),e.jsxs("div",{className:"dl-actions",children:[e.jsx("button",{ref:m,type:"button",className:"btn-secondary",onClick:f,children:r.cancel}),e.jsx("button",{className:`btn-primary ${d?"":"disabled"}`,onClick:s,disabled:!d,children:r.download})]})]})})};function je({currentLang:l,playSinger:f,currentSinger:r,isPlaying:d,activeMode:x}){const{id:m}=H(),h=K(),[s,u]=n.useState(()=>{var o;const a=(o=h.state)==null?void 0:o.preloadedSinger;return a&&a.page===m?a:null}),[p,v]=n.useState(()=>{var a,o;return((o=(a=h.state)==null?void 0:a.preloadedSinger)==null?void 0:o.page)!==m}),[y,b]=n.useState(!1),[t,c]=n.useState(!1),[g,S]=n.useState(0),R=n.useRef(null),N=n.useMemo(()=>[s==null?void 0:s.portrait,...(s==null?void 0:s.altPortraits)||[]].filter(Boolean),[s==null?void 0:s.portrait,s==null?void 0:s.altPortraits]),j=N.length>1;n.useEffect(()=>{if(!j)return;const a=setInterval(()=>{S(o=>(o+1)%N.length)},8e3);return()=>clearInterval(a)},[j,N.length]);const{setEffect:w}=q(),{setShowBackdrop:k}=Q(),i=E[l]||E.en,_=[{title:"CLR",name:"voice color",desc:i.paramClr},{title:"TENC",name:"tension (curve)",desc:i.paramTenc},{title:"VELC",name:"velocity (curve)",desc:i.paramVelc},{title:"GEN",name:"gender (curve)",desc:i.paramGen},{title:"DYN",name:"dynamics (curve)",desc:i.paramDyn},{title:"PEXP",name:"pitch expressiveness (curve)",desc:i.paramPexp}];n.useEffect(()=>{var o;const a=(o=h.state)==null?void 0:o.preloadedSinger;a&&a.page===m&&(u(a),v(!1)),fetch("/singersinfo.txt").then(C=>C.text()).then(C=>{const Y=le(C,l).find(U=>U.page===m);u(Y),v(!1)}).catch(C=>{console.error(C),v(!1)})},[m,l]),n.useEffect(()=>(s!=null&&s.effect?w(s.effect):w(null),()=>w(null)),[s==null?void 0:s.effect,w]),n.useEffect(()=>{const a=setTimeout(()=>k(!1),Z);return()=>clearTimeout(a)},[k]),n.useEffect(()=>{if(!s)return;const a=l==="ja"&&s.nameJa?s.nameJa:s.name,o=document.title;return document.title=`${a} | LUNAI Project`,()=>{document.title=o}},[s,l]);const I=a=>{navigator.clipboard.writeText(a).then(()=>{c(!0),setTimeout(()=>c(!1),2e3)})},$=()=>l==="ja"&&(s!=null&&s.nameJa)?s.nameJa:(s==null?void 0:s.name)||"",D=()=>l==="ru"&&(s!=null&&s.nameRu)?s.nameRu:null,V=()=>s?l==="ja"&&s.infoJa?s.infoJa:l==="ru"&&s.infoRu?s.infoRu:s.info:"",F=()=>s?l==="ja"&&s.infoCVJa?s.infoCVJa:l==="ru"&&s.infoCVRu?s.infoCVRu:s.infoCV:"";if(p)return e.jsx("div",{className:"loading-container",children:e.jsx("div",{className:"loading-spinner"})});if(!s)return e.jsx("div",{className:"page-content",children:"Singer not found"});const A=s.gradient[0],M=s.gradient[1],W=s.buttonColor||M||A,T=F(),L=T?"provider-links align-left":"provider-links",z=s.page==="denka_shaa",J=z?s.author:s.cv,G=z?l==="ru"?"Автор":l==="ja"?"作者":"Author":i.voiceProvider,O=r&&r.id===s.id&&d;return e.jsxs("div",{className:"base-page profile-page",style:{"--accent":A,"--accent-dark":M,"--btn-download":W},children:[e.jsxs("div",{className:"profile-hero",children:[e.jsxs("div",{className:"hero-content",children:[e.jsxs("div",{className:"hero-text",children:[e.jsx("h1",{className:"hero-name",children:$()}),D()&&e.jsx("span",{className:"hero-name-sub",children:D()}),e.jsx("div",{className:"hero-tags",children:e.jsxs("span",{className:"hero-cv",children:["CV: ",s.cv]})}),e.jsx("p",{className:"hero-info",children:V()}),e.jsxs("div",{className:"hero-vm-list",children:[e.jsx("span",{className:"vm-label",children:i.voicePreviews}),e.jsx("div",{className:"vm-buttons",children:s.vm.filter(a=>a.playable!==!1).map(a=>{const o=O&&x===a.name;return e.jsxs("button",{className:`vm-play-btn ${o?"playing":""}`,onClick:()=>f(s,a.name),children:[o?e.jsx(P.Pause,{}):e.jsx(P.Play,{})," ",a.name]},a.name)})})]}),e.jsxs("button",{className:"btn-primary hero-download-btn",onClick:()=>b(!0),children:[e.jsx(P.Download,{}),e.jsx("span",{children:i.downloadModel})]})]}),e.jsxs("div",{className:"hero-portrait-container",children:[s.animPortrait?e.jsx("div",{className:"hero-portrait-rotating hero-portrait-rotating--anim",children:e.jsx("div",{className:"hero-portrait-wrap hero-portrait-wrap--anim",children:e.jsx("div",{className:"hero-portrait-anim",style:s.animPortraitRect?{left:s.animPortraitRect.x+"px",top:s.animPortraitRect.y+"px",width:s.animPortraitRect.w+"px",height:s.animPortraitRect.h+"px",right:"auto",bottom:"auto",inset:"auto"}:void 0,children:e.jsxs("div",{className:"hero-portrait-anim__inner",children:[e.jsx("img",{src:s.portrait,alt:s.name,className:"hero-portrait hero-portrait-anim__img hero-portrait-anim__img--hidden"}),e.jsx("video",{ref:R,src:s.portraitWebm,className:"hero-portrait-anim__video hero-portrait-anim__video--visible",muted:!0,loop:!0,playsInline:!0,autoPlay:!0,"aria-label":s.name})]})})})}):j?e.jsx("div",{className:"hero-portrait-rotating",children:e.jsx("div",{className:"hero-portrait-wrap",children:e.jsx(ee,{mode:"sync",children:re(s.altImgEffect)?e.jsx(B.div,{className:"hero-portrait-glitch-box",role:"img","aria-label":s.name,layout:!1,style:{position:"absolute",inset:0,width:"100%",height:"100%",backgroundImage:`url(${N[g]})`,"--glitch-bg":`url(${N[g]})`},initial:ce,animate:de,exit:me,transition:oe},N[g]):e.jsx(B.img,{src:N[g],alt:s.name,className:"hero-portrait hero-portrait--rotating",layout:!1,style:{position:"absolute",inset:0,width:"100%",height:"100%"},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4,ease:"easeInOut"}},N[g])})})}):e.jsx("img",{src:s.portrait,alt:s.name,className:"hero-portrait"}),e.jsxs("span",{className:"portrait-artist",children:[i.artBy," ",s.artist]})]})]}),e.jsx("div",{className:"hero-bg-glow"})]}),e.jsxs("div",{className:"content-wrapper profile-body",children:[e.jsxs("section",{className:"info-grid-section",children:[e.jsx("h2",{className:"section-title",children:i.techInfo}),e.jsxs("div",{className:"info-grid",children:[s.author&&e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:i.charAuthor}),e.jsx("span",{className:"info-value",children:s.author})]}),s.design&&e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:i.charDesign}),e.jsx("span",{className:"info-value",children:s.design})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:i.nativeLang}),e.jsx("span",{className:"info-value",children:s.mainLangFull})]}),e.jsxs("div",{className:"info-item full-width",children:[e.jsx("span",{className:"info-label",children:i.addLangs}),e.jsx("span",{className:"info-value text-sm",children:s.additionalLangs})]}),e.jsxs("div",{className:"info-item full-width",children:[e.jsx("span",{className:"info-label",children:i.vocalModes}),e.jsx("span",{className:"info-value",children:s.vm.map(a=>a.name).join(", ")})]}),e.jsxs("div",{className:"info-item full-width",children:[e.jsx("span",{className:"info-label",children:i.supExpressions}),e.jsx("span",{className:"info-value text-sm",children:"tension (curve), velocity (curve), gender (curve), dynamics (curve), pitch expressiveness (curve)"})]}),s.growl&&e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:i.vocalGrowl}),e.jsx("span",{className:"info-value",children:s.growl})]}),s.pitch&&e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:i.vocalPitch}),e.jsx("span",{className:"info-value",children:s.pitch})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:i.production}),e.jsx("span",{className:"info-value",children:s.prod})]}),e.jsxs("div",{className:"info-item full-width",children:[e.jsx("span",{className:"info-label",children:i.addAssist}),e.jsx("span",{className:"info-value text-sm",children:s.assist})]}),e.jsxs("div",{className:"info-item full-width",children:[e.jsx("span",{className:"info-label",children:i.trainDb}),e.jsx("span",{className:"info-value text-xs",children:s.dbs})]})]})]}),s.videmo&&s.videmo.length>0&&e.jsxs("section",{className:"video-section",children:[e.jsx("h2",{className:"section-title",children:i.videoDemos}),e.jsx("div",{className:"video-grid",children:s.videmo.map(a=>e.jsx("div",{className:"video-card",children:e.jsx("iframe",{src:`https://www.youtube-nocookie.com/embed/${a}`,title:"YouTube video player",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},a))})]}),e.jsx(te,{singer:s,currentLang:l}),e.jsxs("section",{className:"tiles-section",children:[e.jsx("h2",{className:"section-title",children:i.availModes}),e.jsx("div",{className:"tiles-grid",children:s.vm.map((a,o)=>e.jsxs("div",{className:`info-tile ${a.experimental?"is-experimental":""}`,children:[e.jsxs("div",{className:"tile-header-simple",children:[e.jsx("h3",{className:"tile-name",children:a.name}),e.jsxs("div",{className:"badges-container",children:[a.rap&&e.jsx("span",{className:"vm-badge badge-rap","data-tooltip":i.rapTooltip,children:"RAP"}),a.style&&e.jsx("span",{className:"vm-badge badge-sty","data-tooltip":i.styTooltip,children:"STY"}),a.partial&&e.jsx("span",{className:"vm-badge badge-par","data-tooltip":i.parTooltip,children:"PAR"}),a.experimental&&e.jsx("span",{className:"vm-badge badge-exp","data-tooltip":i.expTooltip,children:"EXP"})]})]}),e.jsx("p",{className:"tile-description",children:a.desc||"Specific vocal tone."})]},o))})]}),e.jsxs("section",{className:"tiles-section",children:[e.jsx("h2",{className:"section-title",children:i.availParams}),e.jsx("div",{className:"tiles-grid",children:_.map((a,o)=>e.jsxs("div",{className:"info-tile parameter-tile",children:[e.jsxs("div",{className:"tile-header-simple",children:[e.jsx("span",{className:"param-code",children:a.title}),e.jsx("h3",{className:"tile-name",children:a.name})]}),e.jsx("p",{className:"tile-description",children:a.desc})]},o))})]}),e.jsxs("section",{className:"provider-section",children:[e.jsx("h2",{className:"section-title",children:G}),e.jsxs("div",{className:"provider-card full-width-card",children:[e.jsx("div",{className:"provider-avatar",children:e.jsx("img",{src:s.cvIcon,alt:s.cv,onError:a=>a.target.style.display="none"})}),e.jsxs("div",{className:"provider-info",children:[e.jsx("h3",{className:"provider-name",children:J}),T&&e.jsx("p",{className:"provider-bio",children:T}),e.jsxs("div",{className:L,children:[s.socials.x&&e.jsx("a",{href:s.socials.x,target:"_blank",rel:"noreferrer",className:"provider-link link-x",title:"X",children:e.jsx("i",{className:"fi fi-brands-twitter-alt",style:{fontSize:"18px"}})}),s.socials.yt&&e.jsx("a",{href:s.socials.yt,target:"_blank",rel:"noreferrer",className:"provider-link link-yt",title:"YouTube",children:e.jsx("i",{className:"fi fi-brands-youtube",style:{fontSize:"18px"}})}),s.socials.web&&e.jsx("a",{href:s.socials.web,target:"_blank",rel:"noreferrer",className:"provider-link link-web",title:"Website",children:e.jsx(P.Web,{})}),s.socials.tw&&e.jsx("a",{href:s.socials.tw,target:"_blank",rel:"noreferrer",className:"provider-link link-tw",title:"Twitch",children:e.jsx("i",{className:"fi fi-brands-twitch",style:{fontSize:"18px"}})}),s.socials.vk&&e.jsx("a",{href:s.socials.vk,target:"_blank",rel:"noreferrer",className:"provider-link link-vk",title:"VK",children:e.jsx("i",{className:"fi fi-brands-vk",style:{fontSize:"18px"}})}),s.socials.sc&&e.jsx("a",{href:s.socials.sc,target:"_blank",rel:"noreferrer",className:"provider-link link-sc",title:"SoundCloud",children:e.jsx("i",{className:"fi fi-brands-soundcloud",style:{fontSize:"20px"}})}),s.socials.tg&&e.jsx("a",{href:s.socials.tg,target:"_blank",rel:"noreferrer",className:"provider-link link-tg",title:"Telegram",children:e.jsx("i",{className:"fi fi-brands-telegram",style:{fontSize:"18px"}})}),s.socials.bb&&e.jsx("a",{href:s.socials.bb,target:"_blank",rel:"noreferrer",className:"provider-link link-bb",title:"Bilibili",children:e.jsx("img",{src:ne,alt:"Bilibili"})}),s.socials.discord&&e.jsxs("button",{className:"provider-link discord-pill",onClick:()=>I(s.socials.discord),title:"Click to copy Discord ID",children:[e.jsx("i",{className:"fi fi-brands-discord",style:{fontSize:"18px"}}),e.jsx("span",{className:"discord-text",children:s.socials.discord}),e.jsx("span",{className:`copy-feedback ${t?"visible":""}`,children:i.copied})]})]})]})]})]})]}),y&&e.jsx(he,{singer:s,onClose:()=>b(!1),t:i})]})}export{je as default};
