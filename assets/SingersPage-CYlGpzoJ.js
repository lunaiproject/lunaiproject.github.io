import{i as ie,f as J,a as G,J as oe,u as K,m as le,r as d,M as W,b as ce,c as de,d as Y,e as ue,j as s,L as me,g as w,t as A,h as ge,A as fe}from"./index-Cd6whSpr.js";import{p as pe}from"./singersParser-BShtwhUG.js";/* empty css                 */function he(...e){const r=!Array.isArray(e[0]),i=r?0:-1,o=e[0+i],n=e[1+i],m=e[2+i],a=e[3+i],c=ie(n,m,a);return r?c(o):c}function xe(e,r,i){const o=e.get();let n=null,m=o,a;const c=typeof o=="string"?o.replace(/[\d.-]/g,""):void 0,h=()=>{n&&(n.stop(),n=null)},l=()=>{h(),n=new oe({keyframes:[U(e.get()),U(m)],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...i,onUpdate:a})};if(e.attach((g,b)=>{m=g,a=f=>b(Z(f,c)),J.postRender(l)},h),G(r)){const g=r.on("change",f=>e.set(Z(f,c))),b=e.on("destroy",g);return()=>{g(),b()}}return h}function Z(e,r){return r?e+r:e}function U(e){return typeof e=="number"?e:parseFloat(e)}function L(e){const r=K(()=>le(e)),{isStatic:i}=d.useContext(W);if(i){const[,o]=d.useState(e);d.useEffect(()=>r.on("change",o),[])}return r}function q(e,r){const i=L(r()),o=()=>i.set(r());return o(),ce(()=>{const n=()=>J.preRender(o,!1,!0),m=e.map(a=>a.on("change",n));return()=>{m.forEach(a=>a()),de(o)}}),i}function be(e){Y.current=[],e();const r=q(Y.current,e);return Y.current=void 0,r}function x(e,r,i,o){if(typeof e=="function")return be(e);const n=typeof r=="function"?r:he(r,i,o);return Array.isArray(e)?z(e,n):z([e],([m])=>n(m))}function z(e,r){const i=K(()=>[]);return q(e,()=>{i.length=0;const o=e.length;for(let n=0;n<o;n++)i[n]=e[n].get();return r(i)})}function I(e,r={}){const{isStatic:i}=d.useContext(W),o=()=>G(e)?e.get():e;if(i)return x(o);const n=L(o());return d.useInsertionEffect(()=>xe(n,e,r),[n,JSON.stringify(r)]),n}const ve=320,ye=176,X=({singer:e,isPlaying:r,isActiveSinger:i,onPlay:o,currentLang:n,onOpeningStart:m})=>{const a=d.useRef(null),c=ue(),h=A[n]||A.en,[l,g]=d.useState(!1),[b,f]=d.useState(!1),k=d.useRef(null),y=L(0),u=L(0),N=I(y,{stiffness:150,damping:15}),j=I(u,{stiffness:150,damping:15}),C=x(j,[-.5,.5],["15deg","-15deg"]),E=x(N,[-.5,.5],["-15deg","15deg"]),S=x(N,[-.5,.5],["20px","-20px"]),t=x(j,[-.5,.5],["20px","-20px"]),v=x(N,[-.5,.5],["0%","100%"]),$=x(j,[-.5,.5],["0%","100%"]);d.useEffect(()=>()=>{k.current&&clearTimeout(k.current)},[]),d.useEffect(()=>{const p=()=>{g(window.innerWidth<=768||window.matchMedia("(hover: none)").matches)};return p(),window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]);const O=p=>{if(l||!a.current)return;const M=a.current.getBoundingClientRect(),te=M.width,ae=M.height,ne=(p.clientX-M.left)/te-.5,re=(p.clientY-M.top)/ae-.5;y.set(ne),u.set(re)},D=()=>{l||(y.set(0),u.set(0))},V=p=>{p.preventDefault(),p.stopPropagation(),o(e)},H=p=>{p.target.closest("button")||p.ctrlKey||p.metaKey||p.shiftKey||p.button!==0||(p.preventDefault(),!b&&(f(!0),m==null||m(),k.current=setTimeout(()=>{k.current=null,c(e.link,{state:{preloadedSinger:e}})},ye)))},Q=n==="ja"&&e.nameJa?e.nameJa:e.name,R=e.gradient[0]||"#7c3aed",F=i&&r,ee=i?"active-card":"",se=b?"opening-card":"";return s.jsx(me,{to:e.link,className:`singer-card-link ${ee} ${se}`,onClick:H,children:s.jsx(w.div,{ref:a,className:"singer-card-container",onMouseMove:O,onMouseLeave:D,style:{rotateX:l?0:C,rotateY:l?0:E,transformStyle:"preserve-3d","--card-glow":R},initial:!1,animate:{scale:b?[1,.97,1.06]:1},transition:b?{duration:ve/1e3,times:[0,.15,1],ease:["easeOut","easeOut","easeOut"]}:{duration:.3,ease:"easeOut"},children:s.jsxs("div",{className:"singer-card-content",children:[s.jsx(w.div,{className:"card-layer background",style:{backgroundImage:`url(${e.cardBg})`,x:l?0:S,y:l?0:t,scale:1.4,z:-100}}),s.jsx("div",{className:"card-layer overlay",style:{transform:"translateZ(-80px) scale(1.4)"}}),s.jsx("div",{className:"card-layer character",style:{backgroundImage:`url(${e.cardImage})`,transform:"translateZ(10px)"}}),s.jsx("div",{className:"card-layer character-shadow",style:{transform:"translateZ(11px)"}}),s.jsxs("div",{className:"card-layer ui",style:{transform:"translateZ(50px)"},children:[s.jsx("div",{className:"card-top-info",children:e.tag&&s.jsx("span",{className:"card-tag",style:{background:R},children:e.tag})}),s.jsxs("div",{className:"card-bottom-info",children:[s.jsx("div",{className:"name-wrapper",style:{borderColor:R},children:s.jsx("h2",{className:"card-name",children:Q})}),s.jsx("div",{className:"card-meta",children:s.jsxs("span",{className:"card-cv",children:["CV: ",e.cv]})}),s.jsxs("div",{className:"card-actions",children:[s.jsx("button",{className:`play-btn ${F?"playing":""}`,onClick:V,"aria-label":F?"Pause":"Play demo",style:{"--btn-color":R},children:F?s.jsx("i",{className:"fi fi-sr-pause"}):s.jsx("i",{className:"fi fi-sr-play"})}),s.jsx("div",{className:"view-profile-btn",children:s.jsx("span",{className:"view-profile-btn-text",children:h.viewProfile})})]})]})]}),s.jsx(w.div,{className:"card-sheen",style:{background:x([v,$],([p,M])=>`radial-gradient(circle at ${p} ${M}, rgba(255,255,255,0.15) 0%, transparent 60%)`),transform:"translateZ(51px)",opacity:l?0:1}})]})})})},Ne=({colleague:e,currentLang:r})=>{var S;const i=d.useRef(null),o=A[r]||A.en,[n,m]=d.useState(!1),a=L(0),c=L(0),h=I(a,{stiffness:150,damping:15}),l=I(c,{stiffness:150,damping:15}),g=x(l,[-.5,.5],["15deg","-15deg"]),b=x(h,[-.5,.5],["-15deg","15deg"]),f=x(h,[-.5,.5],["20px","-20px"]),k=x(l,[-.5,.5],["20px","-20px"]),y=x(h,[-.5,.5],["0%","100%"]),u=x(l,[-.5,.5],["0%","100%"]);d.useEffect(()=>{const t=()=>{m(window.innerWidth<=768||window.matchMedia("(hover: none)").matches)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const N=t=>{if(n||!i.current)return;const v=i.current.getBoundingClientRect(),$=v.width,O=v.height,D=(t.clientX-v.left)/$-.5,V=(t.clientY-v.top)/O-.5;a.set(D),c.set(V)},j=()=>{n||(a.set(0),c.set(0))},C=t=>{t.preventDefault(),t.stopPropagation(),e.link&&window.open(e.link,"_blank","noopener,noreferrer")},E=((S=e.gradient)==null?void 0:S[0])||"#7c3aed";return s.jsx("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"colleague-card-link",onClick:C,"aria-label":`${e.name}, ${e.descriptionDisplay||""}`,children:s.jsx(w.div,{ref:i,className:"colleague-card-container",onMouseMove:N,onMouseLeave:j,style:{rotateX:n?0:g,rotateY:n?0:b,transformStyle:"preserve-3d","--card-glow":E},initial:!1,animate:{scale:1},transition:{duration:.3,ease:"easeOut"},children:s.jsxs("div",{className:"colleague-card-content",children:[s.jsx(w.div,{className:"card-layer background",style:{backgroundImage:`url(${e.cardBg}), url(${e.cardBgFallback})`,x:n?0:f,y:n?0:k,scale:1.4,z:-100}}),s.jsx("div",{className:"card-layer character",style:{backgroundImage:`url(${e.cardImage}), url(${e.cardImageFallback})`,transform:"translateZ(10px)"}}),s.jsxs("div",{className:"card-layer ui",style:{transform:"translateZ(50px)"},children:[s.jsx("div",{className:"card-top-info"}),s.jsxs("div",{className:"card-bottom-info",children:[s.jsx("div",{className:"name-wrapper",style:{borderColor:E},children:s.jsx("h2",{className:"card-name",children:e.name})}),e.descriptionDisplay&&s.jsx("div",{className:"card-meta",children:s.jsx("span",{children:e.descriptionDisplay})}),s.jsx("div",{className:"card-actions",children:s.jsx("div",{className:"view-site-btn",onClick:C,children:o.colleagueVisitSite})})]})]}),s.jsx(w.div,{className:"card-sheen",style:{background:x([y,u],([t,v])=>`radial-gradient(circle at ${t} ${v}, rgba(255,255,255,0.15) 0%, transparent 60%)`),transform:"translateZ(51px)",opacity:n?0:1}})]})})})},je=(e,r="en")=>e?e.split(/!C\d+/).filter(o=>o.trim().length>0).map((o,n)=>{const m=o.split(`
`).map(c=>c.trim()).filter(Boolean),a={id:`colleague-${n}`,name:"",link:"",folder:"",description:null,descriptionRu:null,gradient:null};return m.forEach(c=>{const h=c.indexOf(":");if(h===-1)return;const l=c.substring(0,h).trim().toLowerCase(),g=c.substring(h+1).trim();l==="name"?a.name=g:l==="link"?a.link=g:l==="folder"?a.folder=g:l==="description"?a.description=g:l==="descriptionru"?a.descriptionRu=g:l==="gradient"&&(a.gradient=g)}),a.cardImage=`/colleagues/${a.folder}/card.webp`,a.cardImageFallback=`/colleagues/${a.folder}/card.png`,a.cardBg=`/colleagues/${a.folder}/cardbg.webp`,a.cardBgFallback=`/colleagues/${a.folder}/cardbg.png`,a.gradient=a.gradient?a.gradient.split(",").map(c=>c.trim()):["#7c3aed","#4c1d95"],a.descriptionDisplay=r==="ru"&&a.descriptionRu?a.descriptionRu:a.description,a}).filter(o=>o.name&&o.link&&o.folder):[],ke="/singersinfo.txt",Ce="/colleaguesinfo.txt",_="all",B="original",P="collab",T="colleagues";function Ae({currentLang:e,playSinger:r,currentSinger:i,isPlaying:o}){const[n,m]=d.useState([]),[a,c]=d.useState([]),[h,l]=d.useState(!0),[g,b]=d.useState(null),[f,k]=d.useState(_),{setShowBackdrop:y}=ge(),u=A[e]||A.en,N=d.useCallback(()=>{l(!0),b(null),Promise.all([fetch(ke).then(t=>{if(!t.ok)throw new Error("Info file not found");return t.text()}),fetch(Ce).then(t=>t.ok?t.text():"").catch(()=>"")]).then(([t,v])=>{m(pe(t,e)),c(je(v||"",e))}).catch(t=>{console.error("Error loading data:",t),b(t)}).finally(()=>l(!1))},[e]);d.useEffect(()=>{N()},[N]);const j=n.filter(t=>t.original),C=n.filter(t=>!t.original),E=f===_,S=[{value:_,label:u.filterAll},{value:B,label:u.filterOriginal},{value:P,label:u.filterCollaborative},{value:T,label:u.filterColleagues}];return s.jsxs("div",{className:"base-page singers-page-root",children:[s.jsxs("div",{className:"singers-header",children:[s.jsx("h1",{className:"page-title",children:u.pageSingers}),s.jsx("p",{className:"singers-subtitle",children:u.exploreVoices})]}),h&&!g?s.jsx("div",{className:"loading-container",children:s.jsx("div",{className:"loading-spinner"})}):g?s.jsxs("div",{className:"loading-container singers-error-state",children:[s.jsx("p",{className:"singers-error-message",children:u.dataLoadError}),s.jsx("button",{type:"button",className:"btn-primary",onClick:N,children:u.retry})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"singers-filter-tabs",role:"tablist","aria-label":u.filterAll,children:S.map(({value:t,label:v})=>s.jsx("button",{type:"button",role:"tab","aria-selected":f===t,className:`singers-filter-tab ${f===t?"active":""}`,onClick:()=>k(t),children:v},t))}),s.jsx("div",{className:"singers-sections",children:s.jsx(fe,{mode:"wait",children:s.jsx(w.div,{className:"singers-sections-inner",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.22,ease:"easeOut"},children:E?n.length>0&&s.jsx("section",{className:"singers-section",children:s.jsx("div",{className:"singers-grid-container",children:s.jsx("div",{className:"singers-grid",children:n.map(t=>s.jsx(X,{singer:t,isActiveSinger:i&&i.id===t.id,isPlaying:o,onPlay:r,currentLang:e,onOpeningStart:()=>y(!0)},t.id))})})}):s.jsxs(s.Fragment,{children:[f===B&&j.length>0&&s.jsxs("section",{className:"singers-section","aria-labelledby":"singers-original-heading",children:[s.jsx("h2",{id:"singers-original-heading",className:"singers-section-title",children:u.singersOriginal}),s.jsx("div",{className:"singers-grid-container",children:s.jsx("div",{className:"singers-grid",children:j.map(t=>s.jsx(X,{singer:t,isActiveSinger:i&&i.id===t.id,isPlaying:o,onPlay:r,currentLang:e,onOpeningStart:()=>y(!0)},t.id))})})]}),f===P&&C.length>0&&s.jsxs("section",{className:"singers-section","aria-labelledby":"singers-collab-heading",children:[s.jsx("h2",{id:"singers-collab-heading",className:"singers-section-title",children:u.singersCollaborative}),s.jsx("div",{className:"singers-grid-container",children:s.jsx("div",{className:"singers-grid",children:C.map(t=>s.jsx(X,{singer:t,isActiveSinger:i&&i.id===t.id,isPlaying:o,onPlay:r,currentLang:e,onOpeningStart:()=>y(!0)},t.id))})})]}),f===T&&a.length>0&&s.jsxs("section",{className:"singers-section","aria-labelledby":"singers-colleagues-heading",children:[s.jsx("h2",{id:"singers-colleagues-heading",className:"singers-section-title",children:u.filterColleagues}),s.jsx("div",{className:"singers-grid-container",children:s.jsx("div",{className:"singers-grid singers-grid-colleagues",children:a.map(t=>s.jsx(Ne,{colleague:t,currentLang:e},t.id))})})]}),f===B&&j.length===0||f===P&&C.length===0||f===T&&a.length===0?s.jsx("p",{className:"singers-empty",children:u.singersEmpty}):null]})},f)})})]})]})}export{Ae as default};
