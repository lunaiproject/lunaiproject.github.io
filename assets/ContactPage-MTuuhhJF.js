import{r as l,j as t,t as V}from"./index-CdQ5_9M4.js";import{p as z}from"./singersParser-QoCTbI2e.js";/* empty css                 */class x{constructor(s=0,a="Network Error"){this.status=s,this.text=a}}const G=()=>{if(!(typeof localStorage>"u"))return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,s)=>Promise.resolve(localStorage.setItem(e,s)),remove:e=>Promise.resolve(localStorage.removeItem(e))}},c={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:G()},L=e=>e?typeof e=="string"?{publicKey:e}:e.toString()==="[object Object]"?e:{}:{},Q=(e,s="https://api.emailjs.com")=>{if(!e)return;const a=L(e);c.publicKey=a.publicKey,c.blockHeadless=a.blockHeadless,c.storageProvider=a.storageProvider,c.blockList=a.blockList,c.limitRate=a.limitRate,c.origin=a.origin||s},B=async(e,s,a={})=>{const n=await fetch(c.origin+e,{method:"POST",headers:a,body:s}),o=await n.text(),m=new x(n.status,o);if(n.ok)return m;throw m},I=(e,s,a)=>{if(!e||typeof e!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!s||typeof s!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!a||typeof a!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},X=e=>{if(e&&e.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},K=e=>e.webdriver||!e.languages||e.languages.length===0,O=()=>new x(451,"Unavailable For Headless Browser"),Z=(e,s)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if(typeof s!="string")throw"The BlockList watchVariable has to be a string"},ee=e=>{var s;return!((s=e.list)!=null&&s.length)||!e.watchVariable},te=(e,s)=>e instanceof FormData?e.get(s):e[s],M=(e,s)=>{if(ee(e))return!1;Z(e.list,e.watchVariable);const a=te(s,e.watchVariable);return typeof a!="string"?!1:e.list.includes(a)},U=()=>new x(403,"Forbidden"),se=(e,s)=>{if(typeof e!="number"||e<0)throw"The LimitRate throttle has to be a positive number";if(s&&typeof s!="string")throw"The LimitRate ID has to be a non-empty string"},ae=async(e,s,a)=>{const n=Number(await a.get(e)||0);return s-Date.now()+n},q=async(e,s,a)=>{if(!s.throttle||!a)return!1;se(s.throttle,s.id);const n=s.id||e;return await ae(n,s.throttle,a)>0?!0:(await a.set(n,Date.now().toString()),!1)},$=()=>new x(429,"Too Many Requests"),re=async(e,s,a,n)=>{const o=L(n),m=o.publicKey||c.publicKey,u=o.blockHeadless||c.blockHeadless,f=o.storageProvider||c.storageProvider,g={...c.blockList,...o.blockList},p={...c.limitRate,...o.limitRate};return u&&K(navigator)?Promise.reject(O()):(I(m,e,s),X(a),a&&M(g,a)?Promise.reject(U()):await q(location.pathname,p,f)?Promise.reject($()):B("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:m,service_id:e,template_id:s,template_params:a}),{"Content-type":"application/json"}))},oe=e=>{if(!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},ie=e=>typeof e=="string"?document.querySelector(e):e,ne=async(e,s,a,n)=>{const o=L(n),m=o.publicKey||c.publicKey,u=o.blockHeadless||c.blockHeadless,f=c.storageProvider||o.storageProvider,g={...c.blockList,...o.blockList},p={...c.limitRate,...o.limitRate};if(u&&K(navigator))return Promise.reject(O());const b=ie(a);I(m,e,s),oe(b);const h=new FormData(b);return M(g,h)?Promise.reject(U()):await q(location.pathname,p,f)?Promise.reject($()):(h.append("lib_version","4.4.1"),h.append("service_id",e),h.append("template_id",s),h.append("user_id",m),B("/api/v1.0/email/send-form",h))},le={init:Q,send:re,sendForm:ne,EmailJSResponseStatus:x},ce="/singersinfo.txt",k={Check:()=>t.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("polyline",{points:"20 6 9 17 4 12"})}),Close:()=>t.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Copy:()=>t.jsx("i",{className:"fi fi-sr-copy"})},me=({t:e,currentLang:s})=>{const[a,n]=l.useState([]),[o,m]=l.useState([]),[u,f]=l.useState(""),[g,p]=l.useState([]),[b,h]=l.useState(!1),[N,T]=l.useState(""),[S,E]=l.useState(""),[y,_]=l.useState(""),[v,P]=l.useState(!1),[C,F]=l.useState(!1),j=l.useRef(null),H=l.useRef(null),w=l.useRef(null);l.useEffect(()=>{if(C){w.current=document.activeElement;const r=setTimeout(()=>{var i;return(i=H.current)==null?void 0:i.focus()},0);return()=>{clearTimeout(r),w.current&&typeof w.current.focus=="function"&&w.current.focus()}}},[C]),l.useEffect(()=>{fetch(ce).then(r=>r.text()).then(r=>{const i=z(r,s);n(i)}).catch(console.error)},[s]),l.useEffect(()=>{if(!u.trim()){p([]);return}const r=u.toLowerCase(),i=a.filter(d=>!o.find(W=>W.id===d.id)&&(d.name.toLowerCase().includes(r)||d.nameRu&&d.nameRu.toLowerCase().includes(r)||d.nameJa&&d.nameJa.toLowerCase().includes(r)));p(i)},[u,a,o]);const A=r=>{m([...o,r]),f(""),p([]),j.current&&j.current.focus()},D=r=>{m(o.filter(i=>i.id!==r))},J=r=>{r.key==="Backspace"&&u===""&&o.length>0&&D(o[o.length-1].id)},R=o.length>0&&N.trim().length>0&&S.trim().length>0&&y.trim().length>0&&y.includes("@"),Y=r=>{if(r.preventDefault(),!R||v)return;P(!0);const i={to_email:"lunaiproject@gmail.com",characters:o.map(d=>d.name).join(", "),description:N,purpose:S,contact_email:y,language:s};le.send("YOUR_SERVICE_ID","YOUR_TEMPLATE_ID",i,"YOUR_PUBLIC_KEY").then(d=>{console.log(d.text),P(!1),F(!0),m([]),T(""),E(""),_("")},d=>{console.log(d.text),P(!1),alert("Failed to send application. Please check console.")})};return t.jsxs("div",{className:"contact-card",children:[t.jsx("h2",{className:"centered-form-title",children:e.formTitle}),t.jsxs("form",{className:"comm-form",onSubmit:Y,children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:e.formCharName}),t.jsxs("div",{className:`tag-input-container ${b?"focused":""}`,onClick:()=>j.current&&j.current.focus(),children:[o.map(r=>t.jsxs("span",{className:"singer-tag",children:[t.jsx("img",{src:`/singers/${r.page}/icon.png`,alt:"",className:"tag-icon",onError:i=>i.target.style.display="none"}),t.jsx("span",{className:"tag-text",children:r.name}),t.jsx("button",{type:"button",className:"tag-remove",onClick:i=>{i.stopPropagation(),D(r.id)},children:t.jsx(k.Close,{})})]},r.id)),t.jsx("input",{ref:j,type:"text",className:"tag-input-field",placeholder:o.length===0?e.formCharPlaceholder:"",value:u,onChange:r=>f(r.target.value),onKeyDown:J,onFocus:()=>h(!0),onBlur:()=>setTimeout(()=>h(!1),200)})]}),b&&g.length>0&&t.jsx("div",{className:"suggestions-list",children:g.map(r=>t.jsxs("div",{className:"suggestion-item",onMouseDown:i=>{i.preventDefault(),A(r)},children:[t.jsx("img",{src:`/singers/${r.page}/icon.png`,alt:"",className:"sugg-icon",onError:i=>i.target.style.display="none"}),t.jsx("span",{className:"sugg-name",children:r.name})]},r.id))})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:e.formProjectDesc}),t.jsx("textarea",{className:"form-textarea",placeholder:e.formProjectPlaceholder,value:N,onChange:r=>T(r.target.value),rows:4})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:e.formPurpose}),t.jsx("input",{type:"text",className:"form-input",placeholder:e.formPurposePlaceholder,value:S,onChange:r=>E(r.target.value)})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:e.formEmail}),t.jsx("input",{type:"email",className:"form-input",placeholder:e.formEmailPlaceholder,value:y,onChange:r=>_(r.target.value)})]}),t.jsx("button",{type:"submit",className:`btn-primary form-submit-btn ${!R||v?"disabled":""}`,disabled:!R||v,children:v?t.jsx("div",{className:"loading-spinner-small"}):e.formSubmit})]}),C&&t.jsx("div",{className:"success-modal-backdrop",role:"dialog","aria-modal":"true","aria-labelledby":"success-modal-title",children:t.jsxs("div",{className:"success-modal",children:[t.jsx("div",{className:"success-icon-circle",children:t.jsx(k.Check,{})}),t.jsx("h3",{id:"success-modal-title",children:e.formSentTitle}),t.jsx("p",{children:e.formSentMsg}),t.jsx("button",{ref:H,type:"button",className:"btn-secondary",onClick:()=>F(!1),children:e.formClose})]})})]})};function pe({currentLang:e}){const s=V[e]||V.en,[a,n]=l.useState(!1),o=()=>{navigator.clipboard.writeText("lunaiproject@gmail.com"),n(!0),setTimeout(()=>n(!1),2e3)};return t.jsx("div",{className:"base-page",children:t.jsx("div",{className:"content-wrapper",children:t.jsxs("div",{className:"page-content",style:{display:"block",textAlign:"left",minHeight:"auto"},children:[t.jsx("h1",{className:"page-title",children:s.pageContact}),t.jsxs("div",{className:"contact-card info-card-spacing",children:[t.jsx("h2",{className:"contact-label",children:s.contactEmailLabel}),t.jsxs("div",{className:"email-row",children:[t.jsx("span",{className:"email-text",children:"lunaiproject@gmail.com"}),t.jsx("button",{type:"button",className:`copy-btn ${a?"copied":""}`,onClick:o,title:s.copied||"Copy","aria-label":a?s.copied:"Copy email address",children:a?t.jsx(k.Check,{}):t.jsx(k.Copy,{})})]}),t.jsx("p",{className:"contact-subtext",children:s.contactDesc})]}),t.jsx(me,{t:s,currentLang:e})]})})})}export{pe as default};
